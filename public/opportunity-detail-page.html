<style>
    /* ã€æœ€çµ‚ä¿®æ­£ã€‘å¼·åˆ¶ç¢ºä¿ widget-content åŠå…¶å…§å®¹å¯è¦‹ */
    #opp-potential-contacts-container.widget-content {
        display: block !important;
        flex-grow: initial !important;
        min-height: 50px; /* çµ¦äºˆä¸€å€‹æœ€å°é«˜åº¦ä»¥ç¢ºä¿å®¹å™¨ä¸æœƒå¡Œé™· */
    }

    /* æª”æ¡ˆï¼š public/opportunity-detail-page.html
      ä½ç½®ï¼š <style> æ¨™ç±¤å…§
    */

    /* æ–°å¢çš„å­é ç±¤æ¨£å¼ */
    .sub-tabs {
        display: flex;
        border-bottom: 2px solid var(--border-color);
        margin-bottom: var(--spacing-5);
    }
    .sub-tab-link {
        padding: var(--spacing-3) var(--spacing-4);
        cursor: pointer;
        color: var(--text-muted);
        border: none;
        background: none;
        border-bottom: 3px solid transparent;
        margin-bottom: -2px; /* è®“ active çš„ border è“‹éåº•ç·š */
        transition: all 0.2s ease;
        
        font-size: var(--font-size-base); /* 1rem */
        font-weight: 700; /* åŠ ç²— */
    }
    
    /* ã€*** é€™è£¡æ˜¯ä¿®æ”¹é»ï¼šæ›æˆæ·¡é€æ˜è— ***ã€‘ */
    .sub-tab-link.active {
        color: var(--accent-blue);
        border-bottom-color: var(--accent-blue);
        /* ä½¿ç”¨ color-mix ç”¢ç”Ÿ 20% é€æ˜åº¦çš„ accent-blue */
        background-color: color-mix(in srgb, var(--accent-blue) 20%, transparent); 
        border-radius: var(--rounded-md) var(--rounded-md) 0 0; /* é ‚éƒ¨åœ“è§’ */
    }

    /* ã€*** é€™è£¡æ˜¯ä¿®æ”¹é»ï¼šHover ä¹Ÿæ›æˆæ·¡é€æ˜è— ***ã€‘ */
    .sub-tab-link:hover {
        color: var(--text-primary);
        /* Hover ä½¿ç”¨ 15% é€æ˜åº¦ï¼Œæ¯” active ç•¥æ·¡ */
        background-color: color-mix(in srgb, var(--accent-blue) 15%, transparent); 
        border-radius: var(--rounded-md) var(--rounded-md) 0 0; /* åŒæ¨£è¿½åŠ åœ“è§’ */
        border-bottom-color: var(--border-color); /* çµ¦ hover ä¸€å€‹åº•ç·š */
    }
    
    /* ã€*** ä¿®æ”¹çµæŸ ***ã€‘ */

    .sub-tab-content {
        display: none;
    }
    .sub-tab-content.active {
        display: block;
    }

    /* --- ã€*** ç¨‹å¼ç¢¼ä¿®æ”¹é»ï¼šä»¥ä¸‹è¦å‰‡å·²ç§»é™¤ ***ã€‘ --- */
    /* (åŸæœ‰çš„ #activity-log-timeline ... ç›¸é—œè¦å‰‡å·²è¢«åˆªé™¤)
    */
    /* --- ã€*** ä¿®æ”¹çµæŸ ***ã€‘ --- */
</style>

<div id="opportunity-detail-container">

    <div id="opportunity-info-card-container" class="opportunity-info-card" style="margin-bottom: var(--spacing-6);">
        </div>

    <div id="opportunity-stage-stepper-container" class="dashboard-widget" style="margin-bottom: var(--spacing-6);">
        <div class="widget-header" style="margin-bottom: 0;">
            <h2 class="widget-title">æ©Ÿæœƒé€²ç¨‹</h2>
        </div>
        <div id="opportunity-stage-stepper" class="widget-content">
            </div>
    </div>

    <div id="tab-content-events" class="tab-content active" style="margin-bottom: var(--spacing-6);">
         </div>

    <div id="tab-content-interactions" class="tab-content active" style="margin-bottom: var(--spacing-6);">
        <div class="interaction-layout">
            
            <div class="interaction-history-section">
    
                <div class="sub-tabs">
                    <button class="sub-tab-link active" data-tab="discussion">å‹•æ…‹ç‰†</button>
                    <button class="sub-tab-link" data-tab="activity">ç³»çµ±æ´»å‹•ç´€éŒ„</button>
                </div>
            
                <div id="discussion-pane" class="sub-tab-content active">
                    <div id="discussion-timeline" class="interaction-timeline">
                        </div>
                </div>
                <div id="activity-pane" class="sub-tab-content">
                    <div id="activity-log-timeline" class="interaction-timeline">
                        </div>
                </div>
            
            </div>

            <div class="interaction-form-section">
                <h3 style="margin-bottom: 1.5rem;">æ–°å¢/ç·¨è¼¯äº’å‹•</h3>
                <form id="new-interaction-form">
                    <input type="hidden" id="interaction-opportunity-id">
                    <input type="hidden" id="interaction-edit-rowIndex">
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">äº’å‹•é¡å‹</label>
                            <div class="select-wrapper">
                                <select class="form-select" id="interaction-event-type" required></select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">äº’å‹•æ™‚é–“</label>
                            <input type="datetime-local" class="form-input" id="interaction-time" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">å…§å®¹æ‘˜è¦ *</label>
                        <textarea class="form-textarea" id="interaction-summary" placeholder="è¨˜éŒ„äº’å‹•é‡é»..." required></textarea>
                    </div>
                     <div class="form-group">
                        <label class="form-label">ä¸‹æ¬¡è¡Œå‹•</label>
                        <input type="text" class="form-input" id="interaction-next-action" placeholder="æº–å‚™å ±åƒ¹å–®ä¸¦æ–¼ä¸‹é€±ä¸‰å‰å¯„å‡º..."></input>
                    </div>
                    <button type="submit" class="submit-btn" id="interaction-submit-btn">ğŸ’¾ æ–°å¢ç´€éŒ„</button>
                </form>
            </div>
        </div>
    </div>

    <div class="dashboard-widget" style="margin-top: var(--spacing-6);">
        <div class="widget-header">
            <h2 class="widget-title">é—œè¯è¯çµ¡äºº</h2>
            <button class="action-btn primary" id="add-associated-contact-btn">+ é—œè¯è¯çµ¡äºº</button>
        </div>
        <div id="associated-contacts-list" class="widget-content">
            </div>
    </div>

    <div class="dashboard-widget" style="margin-top: var(--spacing-6);">
        <div class="widget-header">
            <h2 class="widget-title">é—œè¯æ©Ÿæœƒ</h2>
            <button class="action-btn primary" id="add-associated-opportunity-btn">+ é—œè¯æ©Ÿæœƒ</button>
        </div>
        <div id="associated-opportunities-list" class="widget-content">
            </div>
    </div>

    <div class="dashboard-widget" style="margin-top: var(--spacing-6);">
        <div class="widget-header">
            <h2 class="widget-title">åŒå…¬å¸æ½›åœ¨è¯çµ¡äºº</h2>
        </div>
        <div id="opp-potential-contacts-container" class="widget-content">
            </div>
    </div>

</div>